<!DOCTYPE html>
<html lang="fr">
  <head>
    <meta charset="UTF-8" />
    <title>Agent DAG (native)</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="stylesheet" href="./styles.css" />
  </head>

  <body>
    <div class="appbar">
      <input
        id="apiBase"
        style="min-width: 420px"
        value="http://localhost:8000/api/agent/run"
      />
      <input
        id="query"
        style="flex: 1"
        value="Plan a 7-day trip to Madrid using available tools. Return JSON only."
      />
      <button id="runBtn">Run</button>
      <span id="status" class="muted"></span>
    </div>

    <div class="canvas">
      <div class="viewport" id="viewport">
        <svg class="edges" id="edges"></svg>
        <div id="nodesLayer"></div>
      </div>
    </div>

    <!-- Final answer -->
    <div class="final-panel" id="finalPanel">
      <div class="final-header">Final answer</div>
      <pre class="final-content" id="finalContent">No answer yet.</pre>
    </div>

    <!-- Node details (Shift+Click) -->
    <div class="node-panel" id="nodePanel">
      <div class="node-header">
        <div>Node details</div>
        <button class="node-close" id="closeNode">✕</button>
      </div>
      <pre class="node-content" id="nodeContent">Select a node…</pre>
    </div>

    <script type="module" src="./agent.js"></script>
  </body>
</html>
